<div id="container" style="width:100%; height:400px;"></div>
<div id="container2" style="width:100%; height:400px;"></div>

<%= high_chart("energy_data", @energy) %>
<%= high_chart("bio_data", @bio) %>
<hr>

<%= @info[1][0]["indicator"]["value"] %>
<table>
  <tr>
    <td>Country</td>
    <% @info[1].each do |info| %>
    <% if info["value"] %>
    <td><%= info["date"] %></td>
    <% end %>
    <% end %>
  </tr>
  <tr>
    <td><%= @info[1][0]["country"]["value"] %></td>
<% @info[1].each do |info| %>
<% if info["value"] %>
<td><%= info["value"] %></td>
<% end %>
<% end %>
</tr>
</table>

<button type="button" class="button"> <%= link_to "Add new data", new_fact_path(@fact) %></button>

<script>
$(function () {
    $('#container2').highcharts({
        chart: {
            type: 'spline'
        },
        title: {
            text: 'Snow depth at Vikjafjellet, Norway'
        },
        subtitle: {
            text: 'Irregular time data in Highcharts JS'
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: { // don't display the dummy year
                month: '%e. %b',
                year: '%b'
            },
            title: {
                text: 'Date'
            }
        },
        yAxis: [{
            title: {
                text: 'Snow depth (m)'
            },
            min: 0
        },{
        title: {
                text: 'Rainfall',
                style: {
                    color: Highcharts.getOptions().colors[0]
                }
            },
            labels: {
                format: '{value} mm',
                style: {
                    color: Highcharts.getOptions().colors[0]
                }
            },
            opposite: true
        }
        ],
        tooltip: {
            headerFormat: '<b>{series.name}</b><br>',
            pointFormat: '{point.x:%e. %b}: {point.y:.2f} m'
        },

        plotOptions: {
            spline: {
                marker: {
                    enabled: true
                }
            }
        },

        series: [{
            name: 'Winter 2012-2013',
            yAxis: 0,
            // Define the data points. All series have a dummy year
            // of 1970/71 in order to be compared on the same x axis. Note
            // that in JavaScript, months start at 0 for January, 1 for February etc.
            data: [
                [Date.UTC(1970, 9, 21), 0],
                [Date.UTC(1970, 10, 4), 0.28],
                [Date.UTC(1970, 10, 9), 0.25],
                [Date.UTC(1970, 10, 27), 0.2],
                [Date.UTC(1970, 11, 2), 0.28],
                [Date.UTC(1970, 11, 26), 0.28],
                [Date.UTC(1970, 11, 29), 0.47],
                [Date.UTC(1971, 0, 11), 0.79],
                [Date.UTC(1971, 0, 26), 0.72],
                [Date.UTC(1971, 1, 3), 1.02],
                [Date.UTC(1971, 1, 11), 1.12],
                [Date.UTC(1971, 1, 25), 1.2],
                [Date.UTC(1971, 2, 11), 1.18],
                [Date.UTC(1971, 3, 11), 1.19],
                [Date.UTC(1971, 4, 1), 1.85],
                [Date.UTC(1971, 4, 5), 2.22],
                [Date.UTC(1971, 4, 19), 1.15],
                [Date.UTC(1971, 5, 3), 0]
            ]
        }, {
            name: 'Winter 2013-2014',
            yAxis: 0,
            data: [
                [Date.UTC(1970, 9, 29), 0],
                [Date.UTC(1970, 10, 9), 0.4],
                [Date.UTC(1970, 11, 1), 0.25],
                [Date.UTC(1971, 0, 1), 1.66],
                [Date.UTC(1971, 0, 10), 1.8],
                [Date.UTC(1971, 1, 19), 1.76],
                [Date.UTC(1971, 2, 25), 2.62],
                [Date.UTC(1971, 3, 19), 2.41],
                [Date.UTC(1971, 3, 30), 2.05],
                [Date.UTC(1971, 4, 14), 1.7],
                [Date.UTC(1971, 4, 24), 1.1],
                [Date.UTC(1971, 5, 10), 0]
            ]
        }, {
            name: 'Winter 2014-2015',
            yAxis: 0,
            data: [
                [Date.UTC(1970, 10, 25), 0],
                [Date.UTC(1970, 11, 6), 0.25],
                [Date.UTC(1970, 11, 20), 1.41],
                [Date.UTC(1970, 11, 25), 1.64],
                [Date.UTC(1971, 0, 4), 1.6],
                [Date.UTC(1971, 0, 17), 2.55],
                [Date.UTC(1971, 0, 24), 2.62],
                [Date.UTC(1971, 1, 4), 2.5],
                [Date.UTC(1971, 1, 14), 2.42],
                [Date.UTC(1971, 2, 6), 2.74],
                [Date.UTC(1971, 2, 14), 2.62],
                [Date.UTC(1971, 2, 24), 2.6],
                [Date.UTC(1971, 3, 2), 2.81],
                [Date.UTC(1971, 3, 12), 2.63],
                [Date.UTC(1971, 3, 28), 2.77],
                [Date.UTC(1971, 4, 5), 2.68],
                [Date.UTC(1971, 4, 10), 2.56],
                [Date.UTC(1971, 4, 15), 2.39],
                [Date.UTC(1971, 4, 20), 2.3],
                [Date.UTC(1971, 5, 5), 2],
                [Date.UTC(1971, 5, 10), 1.85],
                [Date.UTC(1971, 5, 15), 1.49],
                [Date.UTC(1971, 5, 23), 1.08]
            ]
        },{
            name: 'Winter 2014-2015',
            yAxis: 1,
            data: [
                [Date.UTC(1970, 10, 25), 1],
                [Date.UTC(1970, 11, 6), 1.25],
                [Date.UTC(1970, 11, 20), 2.41],
                [Date.UTC(1970, 11, 25), 2.64],
                [Date.UTC(1971, 0, 4), 2.6],
                [Date.UTC(1971, 0, 17), 3.55],
                [Date.UTC(1971, 0, 24), 3.62],
                [Date.UTC(1971, 1, 4), 4.5],
                [Date.UTC(1971, 1, 14), 5.42],
                [Date.UTC(1971, 2, 6), 6.74],
                [Date.UTC(1971, 2, 14), 4.62],
                [Date.UTC(1971, 2, 24), 1.6],
                [Date.UTC(1971, 3, 2), 3.81],
                [Date.UTC(1971, 3, 12), 1.63],
                [Date.UTC(1971, 3, 28), 1.77],
                [Date.UTC(1971, 4, 5), 1.68],
                [Date.UTC(1971, 4, 10), 1.56],
                [Date.UTC(1971, 4, 15), 1.39],
                [Date.UTC(1971, 4, 20), 1.3],
                [Date.UTC(1971, 5, 5), 1],
                [Date.UTC(1971, 5, 10), 0.85],
                [Date.UTC(1971, 5, 15), 0.49],
                [Date.UTC(1971, 5, 23), 0.08]
            ]
        }]
    });
});
</script>
<script>
$(function() {
  $('#container').highcharts({
    chart: {
      type: 'spline'
    },
    title: {
      text: 'Combo'
    },
    xAxis: {
      type: 'datetime',
      dateTimeLabelFormats: { year: '%Y'},
      title: {
        text: 'Year'
      }
    },
    yAxis: [{ // Primary yAxis
            labels: {
                style: {
                    color: Highcharts.getOptions().colors[1]
                }
            },
            title: {
                text: 'Temperature',
                style: {
                    color: Highcharts.getOptions().colors[1]
                }
            },
            min: 5000,
        }, { // Secondary yAxis
            gridLineWidth: 0,
            title: {

                text: 'Rainfall',
                style: {
                    color: Highcharts.getOptions().colors[0]
                }
            },
            labels: {
                style: {
                    color: Highcharts.getOptions().colors[0]
                }
            },
            opposite: true
        }],

    plotOptions: {
      spline: {
        marker: {
          enabled: true
        }
      }
    },

    series: [{
      name: 'USA',
      yAxis: 0,
      data: <%= @energy_data %>
    }, {
      name: 'USA',
      yAxis: 1,
      type: "column",
      data: [
        [Date.UTC(2013, 0, 1), 7149],
        [Date.UTC(2012, 0, 1), 7226],
        [Date.UTC(2011, 0, 1), 7367],
        [Date.UTC(2010, 0, 1), 7390]
      ]
    }]
  });
});
</script>
